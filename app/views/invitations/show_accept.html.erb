<!-- app/views/invitations/show_accept.html.erb -->
<div class="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
  <div class="max-w-md w-full bg-white rounded-2xl shadow-xl p-8">
    <!-- Header -->
    <div class="text-center mb-8">
      <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
        <%= icon :users, class: "w-8 h-8 text-blue-600" %>
      </div>
      <h1 class="text-2xl font-bold text-gray-900 mb-2">Je bent uitgenodigd!</h1>
      <p class="text-gray-600">
        Je bent uitgenodigd om lid te worden van
      </p>
      <p class="text-xl font-bold text-blue-600 mt-2">
        <%= @invitation.account.name %>
      </p>
    </div>

    <!-- Account Info -->
    <div class="bg-gray-50 rounded-lg p-4 mb-6">
      <div class="flex items-center gap-3 mb-3">
        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-lg">
          <%= @invitation.account.name[0].upcase %>
        </div>
        <div>
          <p class="font-medium text-gray-900"><%= @invitation.account.name %></p>
          <p class="text-sm text-gray-500">
            <%= pluralize(@invitation.account.users.count, 'lid', 'leden') %>
          </p>
        </div>
      </div>

      <% if @invitation.email.present? %>
        <div class="flex items-center gap-2 text-sm text-gray-600 mt-3 pt-3 border-t border-gray-200">
          <%= icon :mail, class: "w-4 h-4 text-gray-400" %>
          <span>Uitgenodigd op: <strong><%= @invitation.email %></strong></span>
        </div>
      <% end %>

      <div class="flex items-center gap-2 text-sm text-gray-600 mt-2">
        <%= icon :warning, class: "w-4 h-4 text-yellow-500" %>
        <span>Verloopt over: <strong><%= distance_of_time_in_words(@invitation.time_remaining) %></strong></span>
      </div>
    </div>

    <!-- Actions -->
    <div class="space-y-3">
      <% if current_user %>
        <!-- User is logged in - Show Accept and Reject buttons -->
        <p class="text-sm text-gray-600 text-center mb-4">
          Aangemeld als <strong><%= current_user.name %></strong>
        </p>

        <%= form_with url: process_invitation_path(@invitation.token), method: :post, class: "w-full" do |f| %>
          <%= f.submit "Accepteren", class: "w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 font-semibold text-lg shadow-md hover:shadow-lg transition-all flex items-center justify-center gap-2" %>
        <% end %>

        <%= button_to reject_invitation_path(@invitation.token), method: :post, class: "w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors flex items-center justify-center gap-2", data: { turbo_confirm: "Weet je zeker dat je deze uitnodiging wilt weigeren?" } do %>
          <%= icon :x, class: "w-5 h-5" %>
          <span>Weigeren</span>
        <% end %>
      <% else %>
        <!-- User needs to register or login -->
        <div class="space-y-3">
          <%= button_to process_invitation_path(@invitation.token), method: :post, class: "w-full px-6 py-3 bg-gradient-to-r from-green-500 to-green-600 text-white rounded-lg hover:from-green-600 hover:to-green-700 font-semibold text-lg shadow-md hover:shadow-lg transition-all" do %>
            Accepteren
          <% end %>

          <%= button_to reject_invitation_path(@invitation.token), method: :post, class: "w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 font-medium transition-colors flex items-center justify-center gap-2", data: { turbo_confirm: "Weet je zeker dat je deze uitnodiging wilt weigeren?" } do %>
            <%= icon :x, class: "w-5 h-5" %>
            <span>Weigeren</span>
          <% end %>
        </div>

        <p class="text-xs text-gray-500 text-center mt-4">
          Je wordt doorgestuurd naar registratie of login bij accepteren
        </p>
      <% end %>
    </div>

    <!-- Security Info -->
    <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
      <div class="flex gap-2">
        <%= icon :shield, class: "w-5 h-5 text-blue-600 flex-shrink-0" %>
        <div class="text-sm text-blue-800">
          <p class="font-medium">Veilige uitnodiging</p>
          <p class="text-blue-700 mt-1">Deze uitnodiging is beveiligd en uniek voor jouw e-mailadres. Je krijgt alleen toegang tot <%= @invitation.account.name %>.</p>
        </div>
      </div>
    </div>
  </div>
</div>
